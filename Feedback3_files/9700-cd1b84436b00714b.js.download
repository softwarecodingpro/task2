"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9700],{69700:function(t,R,U){U.d(R,{D3:function(){return useAuth0},tw:function(){return Auth0Provider},u3:function(){return withAuthenticationRequired}});var L=U(2265),extendStatics=function(t,R){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,R){t.__proto__=R}||function(t,R){for(var U in R)Object.prototype.hasOwnProperty.call(R,U)&&(t[U]=R[U])})(t,R)},__assign=function(){return(__assign=Object.assign||function(t){for(var R,U=1,L=arguments.length;U<L;U++)for(var W in R=arguments[U])Object.prototype.hasOwnProperty.call(R,W)&&(t[W]=R[W]);return t}).apply(this,arguments)};function __awaiter(t,R,U,L){return new(U||(U=Promise))(function(W,N){function fulfilled(t){try{step(L.next(t))}catch(t){N(t)}}function rejected(t){try{step(L.throw(t))}catch(t){N(t)}}function step(t){var R;t.done?W(t.value):((R=t.value)instanceof U?R:new U(function(t){t(R)})).then(fulfilled,rejected)}step((L=L.apply(t,R||[])).next())})}function __generator(t,R){var U,L,W,N={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]},D=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return D.next=verb(0),D.throw=verb(1),D.return=verb(2),"function"==typeof Symbol&&(D[Symbol.iterator]=function(){return this}),D;function verb(A){return function(X){return function(A){if(U)throw TypeError("Generator is already executing.");for(;D&&(D=0,A[0]&&(N=0)),N;)try{if(U=1,L&&(W=2&A[0]?L.return:A[0]?L.throw||((W=L.return)&&W.call(L),0):L.next)&&!(W=W.call(L,A[1])).done)return W;switch(L=0,W&&(A=[2&A[0],W.value]),A[0]){case 0:case 1:W=A;break;case 4:return N.label++,{value:A[1],done:!1};case 5:N.label++,L=A[1],A=[0];continue;case 7:A=N.ops.pop(),N.trys.pop();continue;default:if(!(W=(W=N.trys).length>0&&W[W.length-1])&&(6===A[0]||2===A[0])){N=0;continue}if(3===A[0]&&(!W||A[1]>W[0]&&A[1]<W[3])){N.label=A[1];break}if(6===A[0]&&N.label<W[1]){N.label=W[1],W=A;break}if(W&&N.label<W[2]){N.label=W[2],N.ops.push(A);break}W[2]&&N.ops.pop(),N.trys.pop();continue}A=R.call(t,N)}catch(t){A=[6,t],L=0}finally{U=W=0}if(5&A[0])throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}([A,X])}}}function e(t,R){var U={};for(var L in t)Object.prototype.hasOwnProperty.call(t,L)&&0>R.indexOf(L)&&(U[L]=t[L]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var W=0;for(L=Object.getOwnPropertySymbols(t);W<L.length;W++)0>R.indexOf(L[W])&&Object.prototype.propertyIsEnumerable.call(t,L[W])&&(U[L[W]]=t[L[W]])}return U}"function"==typeof SuppressedError&&SuppressedError,"function"==typeof SuppressedError&&SuppressedError;var W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==U.g?U.g:"undefined"!=typeof self?self:{};function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function o(t,R){return t(R={exports:{}},R.exports),R.exports}var N=o(function(t,R){Object.defineProperty(R,"__esModule",{value:!0});var U=function(){function e(){var t=this;this.locked=new Map,this.addToLocked=function(R,U){var L=t.locked.get(R);void 0===L?void 0===U?t.locked.set(R,[]):t.locked.set(R,[U]):void 0!==U&&(L.unshift(U),t.locked.set(R,L))},this.isLocked=function(R){return t.locked.has(R)},this.lock=function(R){return new Promise(function(U,L){t.isLocked(R)?t.addToLocked(R,U):(t.addToLocked(R),U())})},this.unlock=function(R){var U=t.locked.get(R);if(void 0!==U&&0!==U.length){var L=U.pop();t.locked.set(R,U),void 0!==L&&setTimeout(L,0)}else t.locked.delete(R)}}return e.getInstance=function(){return void 0===e.instance&&(e.instance=new e),e.instance},e}();R.default=function(){return U.getInstance()}});i(N);var D=i(o(function(t,R){var U=W&&W.__awaiter||function(t,R,U,L){return new(U||(U=Promise))(function(W,N){function r(t){try{c(L.next(t))}catch(t){N(t)}}function s(t){try{c(L.throw(t))}catch(t){N(t)}}function c(t){t.done?W(t.value):new U(function(R){R(t.value)}).then(r,s)}c((L=L.apply(t,R||[])).next())})},L=W&&W.__generator||function(t,R){var U,L,W,N,D={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return N={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(N[Symbol.iterator]=function(){return this}),N;function s(N){return function(A){return function(N){if(U)throw TypeError("Generator is already executing.");for(;D;)try{if(U=1,L&&(W=2&N[0]?L.return:N[0]?L.throw||((W=L.return)&&W.call(L),0):L.next)&&!(W=W.call(L,N[1])).done)return W;switch(L=0,W&&(N=[2&N[0],W.value]),N[0]){case 0:case 1:W=N;break;case 4:return D.label++,{value:N[1],done:!1};case 5:D.label++,L=N[1],N=[0];continue;case 7:N=D.ops.pop(),D.trys.pop();continue;default:if(!(W=(W=D.trys).length>0&&W[W.length-1])&&(6===N[0]||2===N[0])){D=0;continue}if(3===N[0]&&(!W||N[1]>W[0]&&N[1]<W[3])){D.label=N[1];break}if(6===N[0]&&D.label<W[1]){D.label=W[1],W=N;break}if(W&&D.label<W[2]){D.label=W[2],D.ops.push(N);break}W[2]&&D.ops.pop(),D.trys.pop();continue}N=R.call(t,D)}catch(t){N=[6,t],L=0}finally{U=W=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}([N,A])}}};Object.defineProperty(R,"__esModule",{value:!0});var D="browser-tabs-lock-key",A={key:function(t){return U(W,void 0,void 0,function(){return L(this,function(t){throw Error("Unsupported")})})},getItem:function(t){return U(W,void 0,void 0,function(){return L(this,function(t){throw Error("Unsupported")})})},clear:function(){return U(W,void 0,void 0,function(){return L(this,function(t){return[2,window.localStorage.clear()]})})},removeItem:function(t){return U(W,void 0,void 0,function(){return L(this,function(t){throw Error("Unsupported")})})},setItem:function(t,R){return U(W,void 0,void 0,function(){return L(this,function(t){throw Error("Unsupported")})})},keySync:function(t){return window.localStorage.key(t)},getItemSync:function(t){return window.localStorage.getItem(t)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(t){return window.localStorage.removeItem(t)},setItemSync:function(t,R){return window.localStorage.setItem(t,R)}};function d(t){return new Promise(function(R){return setTimeout(R,t)})}function u(t){for(var R="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",U="",L=0;L<t;L++)U+=R[Math.floor(Math.random()*R.length)];return U}var X=function(){function e(t){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+u(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=t,void 0===e.waiters&&(e.waiters=[])}return e.prototype.acquireLock=function(t,R){return void 0===R&&(R=5e3),U(this,void 0,void 0,function(){var U,W,N,X,G,J,F;return L(this,function(L){switch(L.label){case 0:U=Date.now()+u(4),W=Date.now()+R,N=D+"-"+t,X=void 0===this.storageHandler?A:this.storageHandler,L.label=1;case 1:return Date.now()<W?[4,d(30)]:[3,8];case 2:return L.sent(),null!==X.getItemSync(N)?[3,5]:(G=this.id+"-"+t+"-"+U,[4,d(Math.floor(25*Math.random()))]);case 3:return L.sent(),X.setItemSync(N,JSON.stringify({id:this.id,iat:U,timeoutKey:G,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,d(30)];case 4:return L.sent(),null!==(J=X.getItemSync(N))&&(F=JSON.parse(J)).id===this.id&&F.iat===U?(this.acquiredIatSet.add(U),this.refreshLockWhileAcquired(N,U),[2,!0]):[3,7];case 5:return e.lockCorrector(void 0===this.storageHandler?A:this.storageHandler),[4,this.waitForSomethingToChange(W)];case 6:L.sent(),L.label=7;case 7:return U=Date.now()+u(4),[3,1];case 8:return[2,!1]}})})},e.prototype.refreshLockWhileAcquired=function(t,R){return U(this,void 0,void 0,function(){var W=this;return L(this,function(D){return setTimeout(function(){return U(W,void 0,void 0,function(){var U,W,D;return L(this,function(L){switch(L.label){case 0:return[4,N.default().lock(R)];case 1:return L.sent(),this.acquiredIatSet.has(R)?null===(W=(U=void 0===this.storageHandler?A:this.storageHandler).getItemSync(t))?N.default().unlock(R):((D=JSON.parse(W)).timeRefreshed=Date.now(),U.setItemSync(t,JSON.stringify(D)),N.default().unlock(R),this.refreshLockWhileAcquired(t,R)):N.default().unlock(R),[2]}})})},1e3),[2]})})},e.prototype.waitForSomethingToChange=function(t){return U(this,void 0,void 0,function(){return L(this,function(R){switch(R.label){case 0:return[4,new Promise(function(R){var U=!1,L=Date.now(),W=!1;function r(){if(W||(window.removeEventListener("storage",r),e.removeFromWaiting(r),clearTimeout(N),W=!0),!U){U=!0;var t=50-(Date.now()-L);t>0?setTimeout(R,t):R(null)}}window.addEventListener("storage",r),e.addToWaiting(r);var N=setTimeout(r,Math.max(0,t-Date.now()))})];case 1:return R.sent(),[2]}})})},e.addToWaiting=function(t){this.removeFromWaiting(t),void 0!==e.waiters&&e.waiters.push(t)},e.removeFromWaiting=function(t){void 0!==e.waiters&&(e.waiters=e.waiters.filter(function(R){return R!==t}))},e.notifyWaiters=function(){void 0!==e.waiters&&e.waiters.slice().forEach(function(t){return t()})},e.prototype.releaseLock=function(t){return U(this,void 0,void 0,function(){return L(this,function(R){switch(R.label){case 0:return[4,this.releaseLock__private__(t)];case 1:return[2,R.sent()]}})})},e.prototype.releaseLock__private__=function(t){return U(this,void 0,void 0,function(){var R,U,W,X;return L(this,function(L){switch(L.label){case 0:return R=void 0===this.storageHandler?A:this.storageHandler,U=D+"-"+t,null===(W=R.getItemSync(U))?[2]:(X=JSON.parse(W)).id!==this.id?[3,2]:[4,N.default().lock(X.iat)];case 1:L.sent(),this.acquiredIatSet.delete(X.iat),R.removeItemSync(U),N.default().unlock(X.iat),e.notifyWaiters(),L.label=2;case 2:return[2]}})})},e.lockCorrector=function(t){for(var R=Date.now()-5e3,U=[],L=0;;){var W=t.keySync(L);if(null===W)break;U.push(W),L++}for(var N=!1,A=0;A<U.length;A++){var X=U[A];if(X.includes(D)){var G=t.getItemSync(X);if(null!==G){var J=JSON.parse(G);(void 0===J.timeRefreshed&&J.timeAcquired<R||void 0!==J.timeRefreshed&&J.timeRefreshed<R)&&(t.removeItemSync(X),N=!0)}}}N&&e.notifyWaiters()},e.waiters=void 0,e}();R.default=X}));let A={timeoutInSeconds:60},X={name:"auth0-spa-js",version:"2.1.3"},c=()=>Date.now();let d=class d extends Error{constructor(t,R){super(R),this.error=t,this.error_description=R,Object.setPrototypeOf(this,d.prototype)}static fromPayload({error:t,error_description:R}){return new d(t,R)}};let u=class u extends d{constructor(t,R,U,L=null){super(t,R),this.state=U,this.appState=L,Object.setPrototypeOf(this,u.prototype)}};let l=class l extends d{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,l.prototype)}};let h=class h extends l{constructor(t){super(),this.popup=t,Object.setPrototypeOf(this,h.prototype)}};let p=class p extends d{constructor(t){super("cancelled","Popup closed"),this.popup=t,Object.setPrototypeOf(this,p.prototype)}};let m=class m extends d{constructor(t,R,U){super(t,R),this.mfa_token=U,Object.setPrototypeOf(this,m.prototype)}};let f=class f extends d{constructor(t,R){super("missing_refresh_token",`Missing Refresh Token (audience: '${g(t,["default"])}', scope: '${g(R)}')`),this.audience=t,this.scope=R,Object.setPrototypeOf(this,f.prototype)}};function g(t,R=[]){return t&&!R.includes(t)?t:""}let w=()=>window.crypto,y=()=>{let t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",R="";return Array.from(w().getRandomValues(new Uint8Array(43))).forEach(U=>R+=t[U%t.length]),R},k=t=>btoa(t),v=t=>{var R,{clientId:U}=t,L=e(t,["clientId"]);return new URLSearchParams(Object.keys(R=Object.assign({client_id:U},L)).filter(t=>void 0!==R[t]).reduce((t,U)=>Object.assign(Object.assign({},t),{[U]:R[U]}),{})).toString()},b=t=>decodeURIComponent(atob(t.replace(/_/g,"/").replace(/-/g,"+")).split("").map(t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join("")),_=async(t,R)=>{let U=await fetch(t,R);return{ok:U.ok,json:await U.json()}},I=async(t,R,U)=>{let L;let W=new AbortController;return R.signal=W.signal,Promise.race([_(t,R),new Promise((t,R)=>{L=setTimeout(()=>{W.abort(),R(Error("Timeout when executing 'fetch'"))},U)})]).finally(()=>{clearTimeout(L)})},S=async(t,R,U,L,W,N,D)=>{var A;return A={auth:{audience:R,scope:U},timeout:W,fetchUrl:t,fetchOptions:L,useFormData:D},new Promise(function(t,R){let U=new MessageChannel;U.port1.onmessage=function(L){L.data.error?R(Error(L.data.error)):t(L.data),U.port1.close()},N.postMessage(A,[U.port2])})},O=async(t,R,U,L,W,N,D=1e4)=>W?S(t,R,U,L,D,W,N):I(t,L,D);async function T(t,R){var{baseUrl:U,timeout:L,audience:W,scope:N,auth0Client:D,useFormData:A}=t,G=e(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);let J=A?v(G):JSON.stringify(G);return await async function(t,R,U,L,W,N,D){let A,X=null;for(let G=0;G<3;G++)try{A=await O(t,U,L,W,N,D,R),X=null;break}catch(t){X=t}if(X)throw X;let G=A.json,{error:J,error_description:F}=G,H=e(G,["error","error_description"]),{ok:Y}=A;if(!Y){let R=F||`HTTP error. Unable to fetch ${t}`;if("mfa_required"===J)throw new m(J,R,H.mfa_token);if("missing_refresh_token"===J)throw new f(U,L);throw new d(J||"request_error",R)}return H}(`${U}/oauth/token`,L,W||"default",N,{method:"POST",body:J,headers:{"Content-Type":A?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(D||X))}},R,A)}let j=(...t)=>{var R;return(R=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(R))).join(" ")};let C=class C{constructor(t,R="@@auth0spajs@@",U){this.prefix=R,this.suffix=U,this.clientId=t.clientId,this.scope=t.scope,this.audience=t.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(t){let[R,U,L,W]=t.split("::");return new C({clientId:U,scope:W,audience:L},R)}static fromCacheEntry(t){let{scope:R,audience:U,client_id:L}=t;return new C({scope:R,audience:U,clientId:L})}};let z=class z{set(t,R){localStorage.setItem(t,JSON.stringify(R))}get(t){let R=window.localStorage.getItem(t);if(R)try{return JSON.parse(R)}catch(t){return}}remove(t){localStorage.removeItem(t)}allKeys(){return Object.keys(window.localStorage).filter(t=>t.startsWith("@@auth0spajs@@"))}};let P=class P{constructor(){let t;this.enclosedCache=(t={},{set(R,U){t[R]=U},get(R){let U=t[R];if(U)return U},remove(R){delete t[R]},allKeys:()=>Object.keys(t)})}};let x=class x{constructor(t,R,U){this.cache=t,this.keyManifest=R,this.nowProvider=U||c}async setIdToken(t,R,U){var L;let W=this.getIdTokenCacheKey(t);await this.cache.set(W,{id_token:R,decodedToken:U}),await (null===(L=this.keyManifest)||void 0===L?void 0:L.add(W))}async getIdToken(t){let R=await this.cache.get(this.getIdTokenCacheKey(t.clientId));if(!R&&t.scope&&t.audience){let R=await this.get(t);if(!R||!R.id_token||!R.decodedToken)return;return{id_token:R.id_token,decodedToken:R.decodedToken}}if(R)return{id_token:R.id_token,decodedToken:R.decodedToken}}async get(t,R=0){var U;let L=await this.cache.get(t.toKey());if(!L){let R=await this.getCacheKeys();if(!R)return;let U=this.matchExistingCacheKey(t,R);U&&(L=await this.cache.get(U))}if(!L)return;let W=await this.nowProvider();return L.expiresAt-R<Math.floor(W/1e3)?L.body.refresh_token?(L.body={refresh_token:L.body.refresh_token},await this.cache.set(t.toKey(),L),L.body):(await this.cache.remove(t.toKey()),void await (null===(U=this.keyManifest)||void 0===U?void 0:U.remove(t.toKey()))):L.body}async set(t){var R;let U=new C({clientId:t.client_id,scope:t.scope,audience:t.audience}),L=await this.wrapCacheEntry(t);await this.cache.set(U.toKey(),L),await (null===(R=this.keyManifest)||void 0===R?void 0:R.add(U.toKey()))}async clear(t){var R;let U=await this.getCacheKeys();U&&(await U.filter(R=>!t||R.includes(t)).reduce(async(t,R)=>{await t,await this.cache.remove(R)},Promise.resolve()),await (null===(R=this.keyManifest)||void 0===R?void 0:R.clear()))}async wrapCacheEntry(t){let R=await this.nowProvider();return{body:t,expiresAt:Math.floor(R/1e3)+t.expires_in}}async getCacheKeys(){var t;return this.keyManifest?null===(t=await this.keyManifest.get())||void 0===t?void 0:t.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(t){return new C({clientId:t},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(t,R){return R.filter(R=>{var U;let L=C.fromKey(R),W=new Set(L.scope&&L.scope.split(" ")),N=(null===(U=t.scope)||void 0===U?void 0:U.split(" "))||[],D=L.scope&&N.reduce((t,R)=>t&&W.has(R),!0);return"@@auth0spajs@@"===L.prefix&&L.clientId===t.clientId&&L.audience===t.audience&&D})[0]}};let Z=class Z{constructor(t,R,U){this.storage=t,this.clientId=R,this.cookieDomain=U,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(t){this.storage.save(this.storageKey,t,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};let K=t=>"number"==typeof t,G=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],E=t=>{if(!t.id_token)throw Error("ID token is required but missing");let R=(t=>{let R=t.split("."),[U,L,W]=R;if(3!==R.length||!U||!L||!W)throw Error("ID token could not be decoded");let N=JSON.parse(b(L)),D={__raw:t},A={};return Object.keys(N).forEach(t=>{D[t]=N[t],G.includes(t)||(A[t]=N[t])}),{encoded:{header:U,payload:L,signature:W},header:JSON.parse(b(U)),claims:D,user:A}})(t.id_token);if(!R.claims.iss)throw Error("Issuer (iss) claim must be a string present in the ID token");if(R.claims.iss!==t.iss)throw Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${R.claims.iss}"`);if(!R.user.sub)throw Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==R.header.alg)throw Error(`Signature algorithm of "${R.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!R.claims.aud||"string"!=typeof R.claims.aud&&!Array.isArray(R.claims.aud))throw Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(R.claims.aud)){if(!R.claims.aud.includes(t.aud))throw Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${R.claims.aud.join(", ")}"`);if(R.claims.aud.length>1){if(!R.claims.azp)throw Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(R.claims.azp!==t.aud)throw Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${R.claims.azp}"`)}}else if(R.claims.aud!==t.aud)throw Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${R.claims.aud}"`);if(t.nonce){if(!R.claims.nonce)throw Error("Nonce (nonce) claim must be a string present in the ID token");if(R.claims.nonce!==t.nonce)throw Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${R.claims.nonce}"`)}if(t.max_age&&!K(R.claims.auth_time))throw Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(null==R.claims.exp||!K(R.claims.exp))throw Error("Expiration Time (exp) claim must be a number present in the ID token");if(!K(R.claims.iat))throw Error("Issued At (iat) claim must be a number present in the ID token");let U=t.leeway||60,L=new Date(t.now||Date.now()),W=new Date(0);if(W.setUTCSeconds(R.claims.exp+U),L>W)throw Error(`Expiration Time (exp) claim error in the ID token; current time (${L}) is after expiration time (${W})`);if(null!=R.claims.nbf&&K(R.claims.nbf)){let t=new Date(0);if(t.setUTCSeconds(R.claims.nbf-U),L<t)throw Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${L}) is before ${t}`)}if(null!=R.claims.auth_time&&K(R.claims.auth_time)){let W=new Date(0);if(W.setUTCSeconds(parseInt(R.claims.auth_time)+t.max_age+U),L>W)throw Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${L}) is after last auth at ${W}`)}if(t.organization){let U=t.organization.trim();if(U.startsWith("org_")){if(!R.claims.org_id)throw Error("Organization ID (org_id) claim must be a string present in the ID token");if(U!==R.claims.org_id)throw Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${U}", found "${R.claims.org_id}"`)}else{let t=U.toLowerCase();if(!R.claims.org_name)throw Error("Organization Name (org_name) claim must be a string present in the ID token");if(t!==R.claims.org_name)throw Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${t}", found "${R.claims.org_name}"`)}}return R};var J=o(function(t,R){var U=W&&W.__assign||function(){return(U=Object.assign||function(t){for(var R,U=1,L=arguments.length;U<L;U++)for(var W in R=arguments[U])Object.prototype.hasOwnProperty.call(R,W)&&(t[W]=R[W]);return t}).apply(this,arguments)};function n(t,R){if(!R)return"";var U="; "+t;return!0===R?U:U+"="+R}function a(t,R,U){return encodeURIComponent(t).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(R).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(t){if("number"==typeof t.expires){var R=new Date;R.setMilliseconds(R.getMilliseconds()+864e5*t.expires),t.expires=R}return n("Expires",t.expires?t.expires.toUTCString():"")+n("Domain",t.domain)+n("Path",t.path)+n("Secure",t.secure)+n("SameSite",t.sameSite)}(U)}function r(t){for(var R={},U=t?t.split("; "):[],L=/(%[\dA-F]{2})+/gi,W=0;W<U.length;W++){var N=U[W].split("="),D=N.slice(1).join("=");'"'===D.charAt(0)&&(D=D.slice(1,-1));try{R[N[0].replace(L,decodeURIComponent)]=D.replace(L,decodeURIComponent)}catch(t){}}return R}function s(){return r(document.cookie)}function c(t,R,L){document.cookie=a(t,R,U({path:"/"},L))}R.__esModule=!0,R.encode=a,R.parse=r,R.getAll=s,R.get=function(t){return s()[t]},R.set=c,R.remove=function(t,R){c(t,"",U(U({},R),{expires:-1}))}});i(J),J.encode,J.parse,J.getAll;var F=J.get,H=J.set,Y=J.remove;let V={get(t){let R=F(t);if(void 0!==R)return JSON.parse(R)},save(t,R,U){let L={};"https:"===window.location.protocol&&(L={secure:!0,sameSite:"none"}),(null==U?void 0:U.daysUntilExpire)&&(L.expires=U.daysUntilExpire),(null==U?void 0:U.cookieDomain)&&(L.domain=U.cookieDomain),H(t,JSON.stringify(R),L)},remove(t,R){let U={};(null==R?void 0:R.cookieDomain)&&(U.domain=R.cookieDomain),Y(t,U)}},$={get(t){let R=V.get(t);return R||V.get(`_legacy_${t}`)},save(t,R,U){let L={};"https:"===window.location.protocol&&(L={secure:!0}),(null==U?void 0:U.daysUntilExpire)&&(L.expires=U.daysUntilExpire),(null==U?void 0:U.cookieDomain)&&(L.domain=U.cookieDomain),H(`_legacy_${t}`,JSON.stringify(R),L),V.save(t,R,U)},remove(t,R){let U={};(null==R?void 0:R.cookieDomain)&&(U.domain=R.cookieDomain),Y(t,U),V.remove(t,R),V.remove(`_legacy_${t}`,R)}},ee={get(t){if("undefined"==typeof sessionStorage)return;let R=sessionStorage.getItem(t);return null!=R?JSON.parse(R):void 0},save(t,R){sessionStorage.setItem(t,JSON.stringify(R))},remove(t){sessionStorage.removeItem(t)}};var et,M=function(t){var R,U,L,W;return et=et||(U=(R=function(t,R){var U=atob(t);if(R){for(var L=new Uint8Array(U.length),W=0,N=U.length;W<N;++W)L[W]=U.charCodeAt(W);return String.fromCharCode.apply(null,new Uint16Array(L.buffer))}return U}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",!1)).indexOf("\n",10)+1,L=R.substring(U)+"",W=new Blob([L],{type:"application/javascript"}),URL.createObjectURL(W)),new Worker(et,t)};let ei={};let B=class B{constructor(t,R){this.cache=t,this.clientId=R,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(t){var R;let U=new Set((null===(R=await this.cache.get(this.manifestKey))||void 0===R?void 0:R.keys)||[]);U.add(t),await this.cache.set(this.manifestKey,{keys:[...U]})}async remove(t){let R=await this.cache.get(this.manifestKey);if(R){let U=new Set(R.keys);return U.delete(t),U.size>0?await this.cache.set(this.manifestKey,{keys:[...U]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(t){return`@@auth0spajs@@::${t}`}};let en={memory:()=>(new P).enclosedCache,localstorage:()=>new z},q=t=>en[t],Q=t=>{let{openUrl:R,onRedirect:U}=t,L=e(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},L),{openUrl:!1===R||R?R:U})},eo=new D;let te=class te{constructor(t){var R,U,L,W;let N,D;if(this.userCache=(new P).enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await eo.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),t),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),t.authorizationParams)}),"undefined"!=typeof window&&(()=>{if(!w())throw Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===w().subtle)throw Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")})(),t.cache&&t.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),t.cache)D=t.cache;else{if(!q(N=t.cacheLocation||"memory"))throw Error(`Invalid cache location "${N}"`);D=q(N)()}this.httpTimeoutMs=t.httpTimeoutInSeconds?1e3*t.httpTimeoutInSeconds:1e4,this.cookieStorage=!1===t.legacySameSiteCookie?V:$,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(U=this.options.clientId,`auth0.${U}.is.authenticated`),this.sessionCheckExpiryDays=t.sessionCheckExpiryDays||1;let A=t.useCookiesForTransactions?this.cookieStorage:ee;this.scope=j("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Z(A,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||c,this.cacheManager=new x(D,D.allKeys?void 0:new B(D,this.options.clientId),this.nowProvider),this.domainUrl=(R=this.options.domain,/^https?:\/\//.test(R)?R:`https://${R}`),this.tokenIssuer=(L=this.options.issuer,W=this.domainUrl,L?L.startsWith("https://")?L:`https://${L}/`:`${W}/`),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===N&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new M)}_url(t){let R=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||X)));return`${this.domainUrl}${t}&auth0Client=${R}`}_authorizeUrl(t){return this._url(`/authorize?${v(t)}`)}async _verifyIdToken(t,R,U){var L;let W=await this.nowProvider();return E({iss:this.tokenIssuer,aud:this.options.clientId,id_token:t,nonce:R,organization:U,leeway:this.options.leeway,max_age:"string"!=typeof(L=this.options.authorizationParams.max_age)?L:parseInt(L,10)||void 0,now:W})}_processOrgHint(t){t?this.cookieStorage.save(this.orgHintCookieName,t,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(t,R,U){var L,W,N,D;let A=k(y()),X=k(y()),G=y(),J=(t=>{let R=new Uint8Array(t);return(t=>{let R={"+":"-","/":"_","=":""};return t.replace(/[+/=]/g,t=>R[t])})(window.btoa(String.fromCharCode(...Array.from(R))))})(await (async t=>{let R=w().subtle.digest({name:"SHA-256"},(new TextEncoder).encode(t));return await R})(G)),F=(L=this.options,W=this.scope,N=t.redirect_uri||this.options.authorizationParams.redirect_uri||U,D=null==R?void 0:R.response_mode,Object.assign(Object.assign(Object.assign({client_id:L.clientId},L.authorizationParams),t),{scope:j(W,t.scope),response_type:"code",response_mode:D||"query",state:A,nonce:X,redirect_uri:N||L.authorizationParams.redirect_uri,code_challenge:J,code_challenge_method:"S256"})),H=this._authorizeUrl(F);return{nonce:X,code_verifier:G,scope:F.scope,audience:F.audience||"default",redirect_uri:F.redirect_uri,state:A,url:H}}async loginWithPopup(t,R){var U,L;if(t=t||{},!(R=R||{}).popup&&(R.popup=(t=>{let R=window.screenX+(window.innerWidth-400)/2,U=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup",`left=${R},top=${U},width=400,height=600,resizable,scrollbars=yes,status=1`)})(0),!R.popup))throw Error("Unable to open a popup for loginWithPopup - window.open returned `null`");let W=await this._prepareAuthorizeUrl(t.authorizationParams||{},{response_mode:"web_message"},window.location.origin);R.popup.location.href=W.url;let N=await (L=Object.assign(Object.assign({},R),{timeoutInSeconds:R.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}),new Promise((t,R)=>{let U;let W=setInterval(()=>{L.popup&&L.popup.closed&&(clearInterval(W),clearTimeout(N),window.removeEventListener("message",U,!1),R(new p(L.popup)))},1e3),N=setTimeout(()=>{clearInterval(W),R(new h(L.popup)),window.removeEventListener("message",U,!1)},1e3*(L.timeoutInSeconds||60));U=function(D){if(D.data&&"authorization_response"===D.data.type){if(clearTimeout(N),clearInterval(W),window.removeEventListener("message",U,!1),L.popup.close(),D.data.response.error)return R(d.fromPayload(D.data.response));t(D.data.response)}},window.addEventListener("message",U)}));if(W.state!==N.state)throw new d("state_mismatch","Invalid state");let D=(null===(U=t.authorizationParams)||void 0===U?void 0:U.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:W.audience,scope:W.scope,code_verifier:W.code_verifier,grant_type:"authorization_code",code:N.code,redirect_uri:W.redirect_uri},{nonceIn:W.nonce,organization:D})}async getUser(){var t;let R=await this._getIdTokenFromCache();return null===(t=null==R?void 0:R.decodedToken)||void 0===t?void 0:t.user}async getIdTokenClaims(){var t;let R=await this._getIdTokenFromCache();return null===(t=null==R?void 0:R.decodedToken)||void 0===t?void 0:t.claims}async loginWithRedirect(t={}){var R;let U=Q(t),{openUrl:L,fragment:W,appState:N}=U,D=e(U,["openUrl","fragment","appState"]),A=(null===(R=D.authorizationParams)||void 0===R?void 0:R.organization)||this.options.authorizationParams.organization,X=await this._prepareAuthorizeUrl(D.authorizationParams||{}),{url:G}=X,J=e(X,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},J),{appState:N}),A&&{organization:A}));let F=W?`${G}#${W}`:G;L?await L(F):window.location.assign(F)}async handleRedirectCallback(t=window.location.href){let R=t.split("?").slice(1);if(0===R.length)throw Error("There are no query params available for parsing.");let{state:U,code:L,error:W,error_description:N}=(t=>{t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#")));let R=new URLSearchParams(t);return{state:R.get("state"),code:R.get("code")||void 0,error:R.get("error")||void 0,error_description:R.get("error_description")||void 0}})(R.join("")),D=this.transactionManager.get();if(!D)throw new d("missing_transaction","Invalid state");if(this.transactionManager.remove(),W)throw new u(W,N||W,U,D.appState);if(!D.code_verifier||D.state&&D.state!==U)throw new d("state_mismatch","Invalid state");let A=D.organization,X=D.nonce,G=D.redirect_uri;return await this._requestToken(Object.assign({audience:D.audience,scope:D.scope,code_verifier:D.code_verifier,grant_type:"authorization_code",code:L},G?{redirect_uri:G}:{}),{nonceIn:X,organization:A}),{appState:D.appState}}async checkSession(t){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(t)}catch(t){}}async getTokenSilently(t={}){var R,U;let L;let W=Object.assign(Object.assign({cacheMode:"on"},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:j(this.scope,null===(R=t.authorizationParams)||void 0===R?void 0:R.scope)})}),N=await ((L=ei[U=`${this.options.clientId}::${W.authorizationParams.audience}::${W.authorizationParams.scope}`])||(L=this._getTokenSilently(W).finally(()=>{delete ei[U],L=null}),ei[U]=L),L);return t.detailedResponse?N:null==N?void 0:N.access_token}async _getTokenSilently(t){let{cacheMode:R}=t,U=e(t,["cacheMode"]);if("off"!==R){let t=await this._getEntryFromCache({scope:U.authorizationParams.scope,audience:U.authorizationParams.audience||"default",clientId:this.options.clientId});if(t)return t}if("cache-only"!==R){if(!await (async(t,R=3)=>{for(let U=0;U<R;U++)if(await t())return!0;return!1})(()=>eo.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new l;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),"off"!==R){let t=await this._getEntryFromCache({scope:U.authorizationParams.scope,audience:U.authorizationParams.audience||"default",clientId:this.options.clientId});if(t)return t}let t=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(U):await this._getTokenFromIFrame(U),{id_token:L,access_token:W,oauthTokenScope:N,expires_in:D}=t;return Object.assign(Object.assign({id_token:L,access_token:W},N?{scope:N}:null),{expires_in:D})}finally{await eo.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(t={},R={}){var U;let L=Object.assign(Object.assign({},t),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),t.authorizationParams),{scope:j(this.scope,null===(U=t.authorizationParams)||void 0===U?void 0:U.scope)})});return R=Object.assign(Object.assign({},A),R),await this.loginWithPopup(L,R),(await this.cacheManager.get(new C({scope:L.authorizationParams.scope,audience:L.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(t){null!==t.clientId?t.clientId=t.clientId||this.options.clientId:delete t.clientId;let R=t.logoutParams||{},{federated:U}=R,L=e(R,["federated"]);return this._url(`/v2/logout?${v(Object.assign({clientId:t.clientId},L))}`)+(U?"&federated":"")}async logout(t={}){let R=Q(t),{openUrl:U}=R,L=e(R,["openUrl"]);null===t.clientId?await this.cacheManager.clear():await this.cacheManager.clear(t.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");let W=this._buildLogoutUrl(L);U?await U(W):!1!==U&&window.location.assign(W)}async _getTokenFromIFrame(t){let R=Object.assign(Object.assign({},t.authorizationParams),{prompt:"none"}),U=this.cookieStorage.get(this.orgHintCookieName);U&&!R.organization&&(R.organization=U);let{url:L,state:W,nonce:N,code_verifier:D,redirect_uri:A,scope:X,audience:G}=await this._prepareAuthorizeUrl(R,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new d("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");let U=t.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,J=await ((t,R,U=60)=>new Promise((L,W)=>{let N;let D=window.document.createElement("iframe");D.setAttribute("width","0"),D.setAttribute("height","0"),D.style.display="none";let r=()=>{window.document.body.contains(D)&&(window.document.body.removeChild(D),window.removeEventListener("message",N,!1))},A=setTimeout(()=>{W(new l),r()},1e3*U);N=function(t){if(t.origin!=R||!t.data||"authorization_response"!==t.data.type)return;let U=t.source;U&&U.close(),t.data.response.error?W(d.fromPayload(t.data.response)):L(t.data.response),clearTimeout(A),window.removeEventListener("message",N,!1),setTimeout(r,2e3)},window.addEventListener("message",N,!1),window.document.body.appendChild(D),D.setAttribute("src",t)}))(L,this.domainUrl,U);if(W!==J.state)throw new d("state_mismatch","Invalid state");let F=await this._requestToken(Object.assign(Object.assign({},t.authorizationParams),{code_verifier:D,code:J.code,grant_type:"authorization_code",redirect_uri:A,timeout:t.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:N,organization:R.organization});return Object.assign(Object.assign({},F),{scope:X,oauthTokenScope:F.scope,audience:G})}catch(t){throw"login_required"===t.error&&this.logout({openUrl:!1}),t}}async _getTokenUsingRefreshToken(t){let R=await this.cacheManager.get(new C({scope:t.authorizationParams.scope,audience:t.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(R&&R.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw new f(t.authorizationParams.audience||"default",t.authorizationParams.scope)}let U=t.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,L="number"==typeof t.timeoutInSeconds?1e3*t.timeoutInSeconds:null;try{let W=await this._requestToken(Object.assign(Object.assign(Object.assign({},t.authorizationParams),{grant_type:"refresh_token",refresh_token:R&&R.refresh_token,redirect_uri:U}),L&&{timeout:L}));return Object.assign(Object.assign({},W),{scope:t.authorizationParams.scope,oauthTokenScope:W.scope,audience:t.authorizationParams.audience||"default"})}catch(R){if((R.message.indexOf("Missing Refresh Token")>-1||R.message&&R.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(t);throw R}}async _saveEntryInCache(t){let{id_token:R,decodedToken:U}=t,L=e(t,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:R,decodedToken:U}),await this.cacheManager.setIdToken(this.options.clientId,t.id_token,t.decodedToken),await this.cacheManager.set(L)}async _getIdTokenFromCache(){let t=this.options.authorizationParams.audience||"default",R=await this.cacheManager.getIdToken(new C({clientId:this.options.clientId,audience:t,scope:this.scope})),U=this.userCache.get("@@user@@");return R&&R.id_token===(null==U?void 0:U.id_token)?U:(this.userCache.set("@@user@@",R),R)}async _getEntryFromCache({scope:t,audience:R,clientId:U}){let L=await this.cacheManager.get(new C({scope:t,audience:R,clientId:U}),60);if(L&&L.access_token){let{access_token:t,oauthTokenScope:R,expires_in:U}=L,W=await this._getIdTokenFromCache();return W&&Object.assign(Object.assign({id_token:W.id_token,access_token:t},R?{scope:R}:null),{expires_in:U})}}async _requestToken(t,R){let{nonceIn:U,organization:L}=R||{},W=await T(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},t),this.worker),N=await this._verifyIdToken(W.id_token,U,L);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},W),{decodedToken:N,scope:t.scope,audience:t.audience||"default"}),W.scope?{oauthTokenScope:W.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(L||N.claims.org_id),Object.assign(Object.assign({},W),{decodedToken:N})}};var er={isAuthenticated:!1,isLoading:!0},stub=function(){throw Error("You forgot to wrap your component in <Auth0Provider>.")},ea=__assign(__assign({},er),{buildAuthorizeUrl:stub,buildLogoutUrl:stub,getAccessTokenSilently:stub,getAccessTokenWithPopup:stub,getIdTokenClaims:stub,loginWithRedirect:stub,loginWithPopup:stub,logout:stub,handleRedirectCallback:stub}),es=(0,L.createContext)(ea),ec=function(t){function OAuthError(R,U){var L=t.call(this,U||R)||this;return L.error=R,L.error_description=U,Object.setPrototypeOf(L,OAuthError.prototype),L}return!function(t,R){if("function"!=typeof R&&null!==R)throw TypeError("Class extends value "+String(R)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,R),t.prototype=null===R?Object.create(R):(__.prototype=R.prototype,new __)}(OAuthError,t),OAuthError}(Error),eu=/[?&]code=[^&]+/,el=/[?&]state=[^&]+/,ed=/[?&]error=[^&]+/,normalizeErrorFn=function(t){return function(R){return R instanceof Error?R:null!==R&&"object"==typeof R&&"error"in R&&"string"==typeof R.error?"error_description"in R&&"string"==typeof R.error_description?new ec(R.error,R.error_description):new ec(R.error):Error(t)}},eh=normalizeErrorFn("Login failed"),ep=normalizeErrorFn("Get access token failed"),deprecateRedirectUri=function(t){var R;(null==t?void 0:t.redirectUri)&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),t.authorizationParams=t.authorizationParams||{},t.authorizationParams.redirect_uri=t.redirectUri,delete t.redirectUri),(null===(R=null==t?void 0:t.authorizationParams)||void 0===R?void 0:R.redirectUri)&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),t.authorizationParams.redirect_uri=t.authorizationParams.redirectUri,delete t.authorizationParams.redirectUri)},reducer=function(t,R){switch(R.type){case"LOGIN_POPUP_STARTED":return __assign(__assign({},t),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return __assign(__assign({},t),{isAuthenticated:!!R.user,user:R.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":if(t.user===R.user)return t;return __assign(__assign({},t),{isAuthenticated:!!R.user,user:R.user});case"LOGOUT":return __assign(__assign({},t),{isAuthenticated:!1,user:void 0});case"ERROR":return __assign(__assign({},t),{isLoading:!1,error:R.error})}},defaultOnRedirectCallback=function(t){window.history.replaceState({},document.title,(null==t?void 0:t.returnTo)||window.location.pathname)},Auth0Provider=function(t){var R=t.children,U=t.skipRedirectCallback,W=t.onRedirectCallback,N=void 0===W?defaultOnRedirectCallback:W,D=t.context,A=void 0===D?es:D,X=function(t,R){var U={};for(var L in t)Object.prototype.hasOwnProperty.call(t,L)&&0>R.indexOf(L)&&(U[L]=t[L]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var W=0,L=Object.getOwnPropertySymbols(t);W<L.length;W++)0>R.indexOf(L[W])&&Object.prototype.propertyIsEnumerable.call(t,L[W])&&(U[L[W]]=t[L[W]]);return U}(t,["children","skipRedirectCallback","onRedirectCallback","context"]),G=(0,L.useState)(function(){return new te((deprecateRedirectUri(X),__assign(__assign({},X),{auth0Client:{name:"auth0-react",version:"2.3.0"}})))})[0],J=(0,L.useReducer)(reducer,er),F=J[0],H=J[1],Y=(0,L.useRef)(!1),V=(0,L.useCallback)(function(t){return H({type:"ERROR",error:t}),t},[]);(0,L.useEffect)(function(){Y.current||(Y.current=!0,__awaiter(void 0,void 0,void 0,function(){var t,R;return __generator(this,function(L){switch(L.label){case 0:var W;if(L.trys.push([0,7,,8]),t=void 0,void 0===W&&(W=window.location.search),!((eu.test(W)||ed.test(W))&&el.test(W))||U)return[3,3];return[4,G.handleRedirectCallback()];case 1:return R=L.sent().appState,[4,G.getUser()];case 2:return t=L.sent(),N(R,t),[3,6];case 3:return[4,G.checkSession()];case 4:return L.sent(),[4,G.getUser()];case 5:t=L.sent(),L.label=6;case 6:return H({type:"INITIALISED",user:t}),[3,8];case 7:return V(eh(L.sent())),[3,8];case 8:return[2]}})}))},[G,N,U,V]);var $=(0,L.useCallback)(function(t){return deprecateRedirectUri(t),G.loginWithRedirect(t)},[G]),ee=(0,L.useCallback)(function(t,R){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(U){switch(U.label){case 0:H({type:"LOGIN_POPUP_STARTED"}),U.label=1;case 1:return U.trys.push([1,3,,4]),[4,G.loginWithPopup(t,R)];case 2:return U.sent(),[3,4];case 3:return V(eh(U.sent())),[2];case 4:return[4,G.getUser()];case 5:return H({type:"LOGIN_POPUP_COMPLETE",user:U.sent()}),[2]}})})},[G]),et=(0,L.useCallback)(function(t){return void 0===t&&(t={}),__awaiter(void 0,void 0,void 0,function(){return __generator(this,function(R){switch(R.label){case 0:return[4,G.logout(t)];case 1:return R.sent(),(t.openUrl||!1===t.openUrl)&&H({type:"LOGOUT"}),[2]}})})},[G]),ei=(0,L.useCallback)(function(t){return __awaiter(void 0,void 0,void 0,function(){var R,U,L;return __generator(this,function(W){switch(W.label){case 0:return W.trys.push([0,2,3,5]),[4,G.getTokenSilently(t)];case 1:return R=W.sent(),[3,5];case 2:throw ep(W.sent());case 3:return U=H,L={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,G.getUser()];case 4:return U.apply(void 0,[(L.user=W.sent(),L)]),[7];case 5:return[2,R]}})})},[G]),en=(0,L.useCallback)(function(t,R){return __awaiter(void 0,void 0,void 0,function(){var U,L,W;return __generator(this,function(N){switch(N.label){case 0:return N.trys.push([0,2,3,5]),[4,G.getTokenWithPopup(t,R)];case 1:return U=N.sent(),[3,5];case 2:throw ep(N.sent());case 3:return L=H,W={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,G.getUser()];case 4:return L.apply(void 0,[(W.user=N.sent(),W)]),[7];case 5:return[2,U]}})})},[G]),eo=(0,L.useCallback)(function(){return G.getIdTokenClaims()},[G]),ea=(0,L.useCallback)(function(t){return __awaiter(void 0,void 0,void 0,function(){var R,U;return __generator(this,function(L){switch(L.label){case 0:return L.trys.push([0,2,3,5]),[4,G.handleRedirectCallback(t)];case 1:return[2,L.sent()];case 2:throw ep(L.sent());case 3:return R=H,U={type:"HANDLE_REDIRECT_COMPLETE"},[4,G.getUser()];case 4:return R.apply(void 0,[(U.user=L.sent(),U)]),[7];case 5:return[2]}})})},[G]),ec=(0,L.useMemo)(function(){return __assign(__assign({},F),{getAccessTokenSilently:ei,getAccessTokenWithPopup:en,getIdTokenClaims:eo,loginWithRedirect:$,loginWithPopup:ee,logout:et,handleRedirectCallback:ea})},[F,ei,en,eo,$,ee,et,ea]);return L.createElement(A.Provider,{value:ec},R)},useAuth0=function(t){return void 0===t&&(t=es),(0,L.useContext)(t)},defaultOnBeforeAuthentication=function(){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},defaultReturnTo=function(){return"".concat(window.location.pathname).concat(window.location.search)},withAuthenticationRequired=function(t,R){return void 0===R&&(R={}),function(U){var W=this,N=R.returnTo,D=void 0===N?defaultReturnTo:N,A=R.onRedirecting,X=R.onBeforeAuthentication,G=void 0===X?defaultOnBeforeAuthentication:X,J=R.loginOptions,F=R.context,H=useAuth0(void 0===F?es:F),Y=H.isAuthenticated,V=H.isLoading,$=H.loginWithRedirect;return(0,L.useEffect)(function(){if(!V&&!Y){var t=__assign(__assign({},J),{appState:__assign(__assign({},J&&J.appState),{returnTo:"function"==typeof D?D():D})});__awaiter(W,void 0,void 0,function(){return __generator(this,function(R){switch(R.label){case 0:return[4,G()];case 1:return R.sent(),[4,$(t)];case 2:return R.sent(),[2]}})})}},[V,Y,$,G,J,D]),Y?L.createElement(t,__assign({},U)):(void 0===A?function(){return L.createElement(L.Fragment,null)}:A)()}}}}]);
//# sourceMappingURL=9700-cd1b84436b00714b.js.map